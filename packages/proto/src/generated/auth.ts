// Code generated by protoc-gen-ts_proto. DO NOT EDIT.
// versions:
//   protoc-gen-ts_proto  v2.8.3
//   protoc               v6.32.0
// source: auth.proto

/* eslint-disable */
import { GrpcMethod, GrpcStreamMethod } from "@nestjs/microservices";
import { Observable } from "rxjs";
import { Empty } from "./google/protobuf/empty";

export const protobufPackage = "auth";

/** --- Registration --- */
export interface RegisterRequest {
  /** The user's full name. */
  fullName: string;
  /** The user's email address. Must be unique across the system. */
  email: string;
  /** The user's raw password. The service is responsible for hashing it securely. */
  password: string;
}

/** --- Login --- */
export interface CredentialsLoginRequest {
  /** The email of the user trying to log in. */
  email: string;
  /** The raw password of the user. */
  password: string;
  /**
   * The User-Agent string from the client's request headers.
   * Used to identify the session's device/browser for security purposes.
   */
  agent: string;
}

export interface GoogleLoginRequest {
  code: string;
  /**
   * The User-Agent string from the client's request headers.
   * Used to identify the session's device/browser for security purposes.
   */
  agent: string;
}

export interface LoginResponse {
  /** Core details of the authenticated user's account. */
  account:
    | Account
    | undefined;
  /** A short-lived JSON Web Token (JWT) used to authenticate subsequent API requests. */
  accessToken: string;
  /** A long-lived, opaque token used to obtain a new access token without re-authentication. */
  refreshToken: string;
}

/** --- Logout --- */
export interface LogoutRequest {
  /** The refresh token to be invalidated. */
  refreshToken: string;
}

/** --- Token Refresh --- */
export interface RefreshTokensRequest {
  /** The User-Agent of the client requesting the refresh. Should match the original login agent. */
  agent: string;
  /** The current, valid refresh token. */
  refreshToken: string;
}

export interface RefreshTokensResponse {
  /** A newly issued, short-lived access token. */
  accessToken: string;
  /** A newly issued, long-lived refresh token (rotated token). */
  refreshToken: string;
}

/** --- Token Validation --- */
export interface ValidateAccessTokenRequest {
  /** The access token to be validated. */
  accessToken: string;
}

/** Contains the essential payload decoded from a valid access token. */
export interface ValidateAccessTokenResponse {
  /** The unique identifier of the user (subject of the token). */
  id: string;
  /** The email associated with the user account. */
  email: string;
}

/** --- Account Info --- */
export interface GetAccountInfoRequest {
  /** The unique identifier for the user account (e.g., a UUID). */
  userId: string;
}

/** Represents the core user account entity. */
export interface Account {
  /** The unique identifier for the user account (e.g., a UUID). */
  id: string;
  /** The user's full name. */
  fullName: string;
  /** The user's primary email address. */
  email: string;
}

export const AUTH_PACKAGE_NAME = "auth";

/**
 * =============================================================================
 *  Auth Service Definition
 * =============================================================================
 *
 * Manages user lifecycle, including registration, authentication, and session management.
 * It is the single source of truth for user identity and access control tokens.
 */

export interface AuthServiceClient {
  /**
   * Registers a new user with email and password.
   * Throws `ALREADY_EXISTS` if an account with the specified email is already registered.
   * Throws `INVALID_ARGUMENT` if input data (e.g., email format) is invalid.
   */

  credentialsRegister(request: RegisterRequest): Observable<Empty>;

  /**
   * Authenticates a user using their credentials.
   * On success, returns a comprehensive response with user account details and a new token pair.
   * Throws `UNAUTHENTICATED` for invalid credentials (wrong email or password).
   */

  credentialsLogin(request: CredentialsLoginRequest): Observable<LoginResponse>;

  googleLogin(request: GoogleLoginRequest): Observable<LoginResponse>;

  /**
   * Invalidates a user's session by deleting the provided refresh token.
   * This effectively logs the user out from the specific device/client.
   * Throws `NOT_FOUND` if the refresh token is not found or already invalidated.
   */

  logout(request: LogoutRequest): Observable<Empty>;

  /**
   * Issues a new pair of access and refresh tokens in exchange for a valid, non-expired refresh token.
   * This allows clients to maintain a session without requiring the user to log in again.
   * Implements token rotation for enhanced security.
   * Throws `UNAUTHENTICATED` if the refresh token is invalid, expired, or has been revoked.
   */

  refreshTokens(request: RefreshTokensRequest): Observable<RefreshTokensResponse>;

  /**
   * Validates an access token's signature and expiration.
   * This is a high-performance, stateless check intended for use by API gateways and service middleware for request authorization.
   * It only decodes the token payload and does NOT query the database.
   * Throws `UNAUTHENTICATED` if the token is invalid or expired.
   */

  validateAccessToken(request: ValidateAccessTokenRequest): Observable<ValidateAccessTokenResponse>;

  /**
   * Retrieves the full, up-to-date account information for the user associated with a valid access token.
   * This method performs a token validation and then fetches data from the primary user database.
   * Throws `UNAUTHENTICATED` if the token is invalid.
   */

  getAccountInfo(request: GetAccountInfoRequest): Observable<Account>;
}

/**
 * =============================================================================
 *  Auth Service Definition
 * =============================================================================
 *
 * Manages user lifecycle, including registration, authentication, and session management.
 * It is the single source of truth for user identity and access control tokens.
 */

export interface AuthServiceController {
  /**
   * Registers a new user with email and password.
   * Throws `ALREADY_EXISTS` if an account with the specified email is already registered.
   * Throws `INVALID_ARGUMENT` if input data (e.g., email format) is invalid.
   */

  credentialsRegister(request: RegisterRequest): void;

  /**
   * Authenticates a user using their credentials.
   * On success, returns a comprehensive response with user account details and a new token pair.
   * Throws `UNAUTHENTICATED` for invalid credentials (wrong email or password).
   */

  credentialsLogin(
    request: CredentialsLoginRequest,
  ): Promise<LoginResponse> | Observable<LoginResponse> | LoginResponse;

  googleLogin(request: GoogleLoginRequest): Promise<LoginResponse> | Observable<LoginResponse> | LoginResponse;

  /**
   * Invalidates a user's session by deleting the provided refresh token.
   * This effectively logs the user out from the specific device/client.
   * Throws `NOT_FOUND` if the refresh token is not found or already invalidated.
   */

  logout(request: LogoutRequest): void;

  /**
   * Issues a new pair of access and refresh tokens in exchange for a valid, non-expired refresh token.
   * This allows clients to maintain a session without requiring the user to log in again.
   * Implements token rotation for enhanced security.
   * Throws `UNAUTHENTICATED` if the refresh token is invalid, expired, or has been revoked.
   */

  refreshTokens(
    request: RefreshTokensRequest,
  ): Promise<RefreshTokensResponse> | Observable<RefreshTokensResponse> | RefreshTokensResponse;

  /**
   * Validates an access token's signature and expiration.
   * This is a high-performance, stateless check intended for use by API gateways and service middleware for request authorization.
   * It only decodes the token payload and does NOT query the database.
   * Throws `UNAUTHENTICATED` if the token is invalid or expired.
   */

  validateAccessToken(
    request: ValidateAccessTokenRequest,
  ): Promise<ValidateAccessTokenResponse> | Observable<ValidateAccessTokenResponse> | ValidateAccessTokenResponse;

  /**
   * Retrieves the full, up-to-date account information for the user associated with a valid access token.
   * This method performs a token validation and then fetches data from the primary user database.
   * Throws `UNAUTHENTICATED` if the token is invalid.
   */

  getAccountInfo(request: GetAccountInfoRequest): Promise<Account> | Observable<Account> | Account;
}

export function AuthServiceControllerMethods() {
  return function (constructor: Function) {
    const grpcMethods: string[] = [
      "credentialsRegister",
      "credentialsLogin",
      "googleLogin",
      "logout",
      "refreshTokens",
      "validateAccessToken",
      "getAccountInfo",
    ];
    for (const method of grpcMethods) {
      const descriptor: any = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);
      GrpcMethod("AuthService", method)(constructor.prototype[method], method, descriptor);
    }
    const grpcStreamMethods: string[] = [];
    for (const method of grpcStreamMethods) {
      const descriptor: any = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);
      GrpcStreamMethod("AuthService", method)(constructor.prototype[method], method, descriptor);
    }
  };
}

export const AUTH_SERVICE_NAME = "AuthService";
